<div ng-init="init();search();" >

    <div class="row">
        <div class="col-md-12">
            <div class="card margin-TB-5 TableCard" >
                <!--<div class="card-header card-header-icon" data-background-color="purple">-->
                <!--<i class="material-icons">assignment</i>-->
                <!--</div>-->
                <div class="card-content">
                    <!--<h4 class="card-title">DataTables.net</h4>-->
                    <div class="SearchTable">

                        <form name="searchForm"  ng-submit="search()" novalidate >

							<div class="row" >

			                    <div class="col-md-2">

			                        <!--<div class="form-group label-floating">-->
			                        <!--<label class="control-label">Date</label>-->
			                        <!--<input class="datepicker form-control" type="text" value="03/01/2018"/>-->

			                        <!--</div>-->

			                        <div class="form-group">
			                            <label class="label-control">From date</label>
			                            <span class="form-control-feedback calender-icon"><i class="material-icons">date_range</i></span>
			                            <input type="text" class="form-control datepicker"  id="dateFilterFrom"  placeholder="{{dateFilterFrom | date:'dd-MMM-yyyy'}}" />

			                        </div>

			                    </div>
			                    <div class="col-md-2">

			                        <div class="form-group">
			                            <label class="label-control">To date</label>
			                            <span class="form-control-feedback calender-icon"><i class="material-icons">date_range</i></span>
			                            <input type="text" class="form-control datepicker"  id="dateFilterTo"  placeholder="{{dateFilterTo | date:'dd-MMM-yyyy'}}"/>

			                        </div>

			                    </div>
			                    <div class="col-md-6">

			                    </div>
			                    <div class="col-md-2">
									<div class="form-group ">
				                         <button type="submit" class="btn btn-circle blue-clr" ng-disabled="searchForm.$invalid">
				                             <i class="material-icons">search</i>
				                         </button>
				                         <button ng-show="ticketsData.length" type="button" title="Export HTML"  ng-click=exportAllData('html') class="btn btn-circle green-clr">
				                             <i class="material-icons">description</i>
				                         </button>
				                         <button ng-show="ticketsData.length" type="button"  title="Export CSV"  ng-click=exportAllData('xlsx') class="btn btn-circle green-clr">
				                             <i class="material-icons">import_contacts</i>
				                         </button>
				                         <button ng-click="refreshPage()" class="btn btn-circle orange-clr">
				                             <i class="material-icons">refresh</i>
				                         </button>
				                         <a class="download-btn" href="{{exportFile(0)}}">{{exportMsg(0)}}</a>
				                     </div>
			                     </div>
			               </div>
			               <div class="row">
			                    <div class="col-md-3">
			                        <div class="dropdown">
			                            <label class="label-control">Select Client</label>
			                            <select class="form-control " ng-model="selectedProject" ng-change="changeProject()" ng-options="project as project.name for project in projects" >
			                                <option value="">Select Client...</option>
			                            </select>
			                        </div>
			                    </div>
			                    <div class="col-md-3">
			                        <div class="dropdown ">
			                            <label class="label-control">Select Site</label>
			                            <select class="form-control " ng-model="selectedSite" ng-change="refreshReport()" ng-options="site as site.name for site in sites">
			                                <option value="">Select Site...</option>
			                            </select>
			                        </div>
			                    </div>
			                    <div class="col-md-3">
			                        <div class="dropdown ">
			                            <label class="label-control">Status</label>
			                            <select class="form-control " ng-model="selectedStatus" ng-change="refreshReport()" ng-options="status as status for status in ticketStatuses">
			                                <option value="">Select status...</option>
			                            </select>
			                        </div>
			                    </div>


			                </div>


                        </form>

                    </div>

                    <div class="table-responsive tablecard">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th>Ticket Id<a href="#">

                                    <span ng-click="columnAscOrder('id')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('id')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Issue<a href="#">

                                    <span ng-click="columnAscOrder('title')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('title')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Description<a href="#">

                                    <span ng-click="columnAscOrder('description')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('description')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Initiator<a href="#">

                                    <span ng-click="columnAscOrder('createdBy')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('createdBy')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Initiated at<a href="#">

                                    <span ng-click="columnAscOrder('createdDate')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('createdDate')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Assigned To<a href="#">

                                    <span ng-click="columnAscOrder('assignedTo.name')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('assignedTo.name')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Assigned at<a href="#">

                                    <span ng-click="columnAscOrder('assignedOn')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('assignedOn')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Closed by<a href="#">

                                    <span ng-click="columnAscOrder('closedBy.name')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('closedBy.name')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Closed at<a href="#">

                                    <span ng-click="columnAscOrder('closedOn')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('closedOn')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>Status<a href="#">

                                    <span ng-click="columnAscOrder('status')"  class=""><i class="fa fa-caret-up"></i></span>
                                    <span ng-click="columnDescOrder('status')" class=""><i class="fa fa-caret-down"></i></span>

                                </a></th>
                                <th>TAT</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="ticket in ticketsData">
                                <td>{{ticket.id}}</td>
                                <td>{{ticket.title}}</td>
                                <td>{{ticket.description}}</td>
                                <td>{{ticket.createdBy}}</td>
                                <td>{{ticket.createdDate | date:'MM/dd/yyyy @ h:mma'}}</td>
                                <td>{{ticket.assignedToName}}</td>
                                <td>{{ticket.assignedOn | date:'MM/dd/yyyy @ h:mma'}}</td>
                                <td>{{ticket.closedByName}}</td>
                                <td>{{ticket.closedOn | date:'MM/dd/yyyy @ h:mma'}}</td>
                                <td>{{ticket.status}}</td>
                                <td>{{ticket.tat}}</td>
                            </tr>

                            </tbody>
                        </table>


                    </div>



                </div>
                <!-- end content-->
            </div>
            <!--  end card  -->
        </div>
        <!-- end col-md-12 -->
    </div>
    <!-- end row -->

    <div class="card margin-TB-5 txt-align-center" ng-hide="tickets">

        <div class="card-content">
            <div class="" style="text-align:center;padding: 10px 0;" ng-hide="ticketsDataLoader">
                <div loader-css="ball-pulse"></div>
            </div>

            <h3>No data Found</h3>

        </div>

    </div>


    <div class="row">

        <div class="col-md-6"></div>
        <div class="col-md-6 text-right">
            <ul class="pagination pagination-warning">

                <li class="paging-first" ID="first">
                    <a href="#" id="first" ng-click="first()">
                        <i id="first" class=" fa fa-step-backward"></i></a>
                </li>
                <li class="prev paging-previous" id="previous">
                    <a id="previous" href="#" ng-click="previous()"> prev</a>
                </li>

                <li class="active">
                    <a href="javascript:void(0);">{{pages.currPage}}</a>
                </li>
                <li class="next paging-next" id="next">
                    <a id="next" href="#" ng-click="next()" >next</a>
                </li>
                <li class="paging-last" id="last">
                    <a id="last" href="#" ng-click="last()"><i id="last" class="fa fa-step-forward"></i></a>
                </li>

            </ul>
        </div>

    </div>



</div>

		<!-- Delete confirmation dialog -->
		<div id="deleteModal" class="delete-confirmation modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">Delete</h4>
					</div>
					<div class="modal-body">
						<p>Are you sure that you want to delete this record?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button type="button"
							class="btn btn-danger delete-confirmation-button">Delete</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End of Delete confirmation dialog -->

		<!-- Delete Multiple confirmation dialog -->
		<div class="delete-multiple-confirmation modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-hidden="true">&times;</button>
						<h4 class="modal-title">Delete</h4>
					</div>
					<div class="modal-body">
						<p>Are you sure that you want to delete this record?</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">
							Cancel</button>
						<button type="button"
							class="btn btn-danger delete-multiple-confirmation-button"
							data-target="http://localhost:81/grocery_crud/index.php/examples/customers_management/delete_multiple">
							Delete</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End of Delete Multiple confirmation dialog -->

	</div>


<!-- notice modal -->
<div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-notice">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="material-icons">clear</i></button>
                <h5 class="modal-title" id="myModalLabel">Maps</h5>
            </div>
            <div class="modal-body">


                <table >
                    <thead>
                    <tr >
                        <th style="text-align: center">IN</th>
                        <td>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <th style="text-align: center">OUT</th>
                    </tr>

                    </thead>
                    <tr>
                        <td><br/></td>
                    </tr>
                    <tr>
                        <td>
                            <div id="mapIn" style="width:250px;height:250px">
                            </div>
                        </td>
                        <td>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                        <td>
                            <div id="mapOut" style="width:250px;height:250px"></div>
                        </td>
                    </tr>
                </table>


            </div>
            <div class="modal-footer text-center">
                <button type="button" class="btn btn-danger btn-round" data-dismiss="modal">close</button>
            </div>
        </div>
    </div>
</div>
<!-- end notice modal -->
