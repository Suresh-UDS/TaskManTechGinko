
<div class="crud-form"
	data-unique-hash="a2ad475d60b22954085c657a73309b8f">
	<div class="" ng-controller="EmployeeController">
		<div class="row" ng-init="initAddEdit()">
            <div class="col-md-12" >

                <div class="alert alert-success" ng-show="success">
                    <strong>Employee saved!</strong>
                </div>

                <div class="alert alert-danger" ng-show="error">
                    <strong>Employee Not Saved!</strong> Please try again later.
                </div>
                <div class="alert alert-danger" ng-show="errorEmployeeExists">
                    <!-- <strong>One of Employee ID or Name or Full Name already registered!</strong> Please choose another one. -->
                    <strong>{{errorMessage}}!</strong> Please choose another one.
                </div>
                <div class="alert alert-danger" ng-show="errorProject">
                    <strong>Invalid Project</strong> Please choose another one.
                </div>
                <div class="alert alert-danger" ng-show="errorSite">
                    <strong>Invalid Site</strong> Please choose another one.
                </div>

            </div>
			<div class="col-md-12">

                <!--<div class="titleCon">-->
                    <!--<h3>Add Employee</h3>-->
                <!--</div>-->


				<div class="form-container table-container">
					<form ng-show="!success" name="form" role="form" novalidate
						ng-submit="saveEmployee()"
						onClick="" class="form-horizontal">


                        <div class="row" ng-init="loadUserRoles()">

                            <div class="col-md-6">

                                <div class="panel panel-default">
                                    <div class="panel-heading">Identity and Name</div>
                                    <div class="panel-body">

                                        <div class="row">

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Employee ID</label>
                                                    <input id='employeeEmpId' ng-model="employee.empId" class='form-control'
                                                           name='employeeEmpId' type='text' value="" ng-minlength=1 ng-maxlength=10 ng-pattern="/^[A-Za-z0-9]*$/" autofocus required ng-blur="getEmployeeByEmpId()"/>
                                                    <div ng-show="form.$submitted || form.employeeEmpId.$touched">
                                                        <div ng-show="form.employeeEmpId.$dirty || form.employeeEmpId.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.required">
                                                                Id is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.minlength">
                                                                Id is required to be at least 1 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.maxlength">
                                                                Id cannot be longer than 10 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.pattern">
                                                                Id can only contain letters and digits.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group selectcon" style="padding-top:25px;">

                                                    <div class="" style="float:left;width:80%;">
                                                        <select class="form-control" ng-model="employee.designation" ng-options="designation.designation as designation.designation for designation in designations">
                                                            <option value="">Please select Designation..</option>
                                                        </select>
                                                    </div>
                                                    <div class="" style="float:left;">
                                                        <a href="javascript:;"  data-toggle="collapse" data-parent="#accordian" data-target="#addDesignation" class="btn btn-round btn-fab btn-fab-mini btn-simple" aria-expanded="false" aria-controls="collapseExample">
                                                            <i class="material-icons">add</i>
                                                        </a>
                                                    </div>
                                                    <div class="collapse" id="addDesignation">
                                                        <div class="">

                                                            <input class="input-desc" id='designationName' ng-model="designation"
                                                                   name='designation' type='text' value=""/>
                                                            <a class="btn btn-success"  ng-click="addDesignation()">Add</a>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Name</label>
                                                    <input id='employeeName' ng-model="employee.name" class='form-control'
                                                           name='employeeName' type='text' value=""
                                                           ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/" required />
                                                    <div ng-show="form.$submitted || form.employeeName.$touched">
                                                        <div ng-show="form.employeeName.$dirty || form.employeeName.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.required">
                                                                Employee name is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.minlength">
                                                                Employee name is required to be at least 5 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.maxlength">
                                                                Employee name cannot be longer than 50 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.pattern">
                                                                Employee name can only contain letters,numbers and space.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Last Name</label>
                                                    <input id='employeeLastName' ng-model="employee.lastName" class='form-control'
                                                           name='employeeLastName' type='text' value=""
                                                           ng-minlength=1 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/" required />
                                                    <div ng-show="form.$submitted || form.employeeLastName.$touched">
                                                        <div ng-show="form.employeeLastName.$dirty || form.employeeLastName.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.required">
                                                                Employee last name is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.minlength">
                                                                Employee last name is required to be at least 1 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.maxlength">
                                                                Employee last name cannot be longer than 50 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.pattern">
                                                                Employee last name can only contain letters,numbers and space.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Phone Number</label>
                                                    <input id='employeePhone' ng-model="employee.phone" class='form-control'
                                                           name='employeePhone' type='number' value=""
                                                           ng-minlength=10 ng-maxlength=13 ng-pattern="/^[A-Za-z0-9\s&-/]*$/"  />
                                                    <div ng-show="form.$submitted || form.employeePhone.$touched">
                                                        <div ng-show="form.employeeName.$dirty || form.employeePhone.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeePhone.$error.required">
                                                                Employee Phone No. is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeePhone.$error.minlength">
                                                                Employee Phone No. is required to be at least 10 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeePhone.$error.maxlength">
                                                                Employee Phone No. cannot be longer than 13 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeePhone.$error.pattern">
                                                                Employee Phone No. can only contain letters,numbers and space.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>

                            </div>

                       		<div class="col-md-6">
                                 <div class="form-group">
                                     <label class="control-label">User Role <span class="red-star">*</span> </label>
                                     <!--<input type="text" class="form-control"-->
                                             <!--ng-model="selectedRole"-->
                                            <!--uib-typeahead="role as role.name for role in userRoles | filter:$viewValue | limitTo:5"-->
                                            <!--name="UserRole" ng-minlength="5" ng-maxlength="50" autofocus-->
                                            <!--required >-->
                                     <select class="form-control " ng-model="selectedRole"  ng-options="role as role.name for role in userRoles">
                                         <option value="">Please select role...</option>
                                     </select>

                                     <div ng-show="form.$submitted || form.UserRole.$touched">
                                         <div ng-show="form.UserRole.$dirty || form.UserRole.$invalid">
                                             <p class="help-block" style="color: maroon"
                                                ng-show="form.UserRole.$error.required">User Role is
                                                 required.</p>
                                             <p class="help-block" style="color: maroon"
                                                ng-show="form.UserRole.$error.minlength">User Role is
                                                 required to be at least 5 character.</p>
                                             <p class="help-block" style="color: maroon"
                                                ng-show="form.UserRole.$error.maxlength">User Role
                                                 cannot be longer than 50 characters.</p>
                                         </div>
                                     </div>

                                 </div>
                             </div>

                       </div>

                       <div class="row" >
                       
                       <div class="col-md-6">

                                <div class="panel panel-default">
                                    <div class="panel-heading">Client Info</div>
                                    <div class="panel-body">

                                        <div class="row">

                                            <div class="col-md-4">
                                                <div class="form-group">

                                                    <!--<label class="control-label">Client</label>-->
                                                    <div class="dropdown">

                                                        <!--<input type="text" class="form-control" ng-model="selectedProject" name="projectName" ng-value="selectedProject.name"-->
                                                               <!--uib-typeahead="project as project.name for project in projects | filter:$viewValue | limitTo:5"-->
                                                               <!--ng-blur="loadSites()"-->
                                                               <!--ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/"  autocomplete="off" />-->
                                                        <select class=" form-control " ng-model="selectedProject" ng-change="loadSites()" ng-options="project as project.name for project in projects" >
                                                            <option value="">Please select Client...</option>
                                                        </select>
                                                        <div ng-show="form.$submitted || form.projectName.$touched">
                                                            <div ng-show="form.projectName.$dirty || form.projectName.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.required">
                                                                    Client name is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.minlength">
                                                                    Client name is required to be at least 2 character.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.maxlength">
                                                                    Client name cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.pattern">
                                                                    Client name can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group label-floating">
                                                    <!--<label class="control-label">Site</label>-->
                                                    <div class="dropdown" >
                                                        <!--<input ng-focus="loadSites()" type="text" class="form-control"  ng-model="selectedSite" name="siteName" ng-value="selectedSite.name"-->
                                                               <!--uib-typeahead="site as site.name for site in sites | filter:$viewValue | limitTo:5"-->
                                                               <!--ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/"  autocomplete="off" />-->

                                                        <select class="form-control " ng-model="selectedSite"  ng-options="site as site.name for site in sites">
                                                            <option value="">Please select Site...</option>
                                                        </select>

                                                        <div ng-show="form.$submitted || form.siteName.$touched">
                                                            <div ng-show="form.siteName.$dirty || form.siteName.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.required">
                                                                    Site name is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.minlength">
                                                                    Site name is required to be at least 2 character.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.maxlength">
                                                                    Site name cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.pattern">
                                                                    Site name can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


											<div class="col-md-3">

                                                <button class="btn btn-success" style="margin-top:0;" type="button" ng-click="addProjectSite()">
					                                <span class="btn-label">
					                                    <i class="material-icons">add</i>
					                                </span>
                                                    Add
                                                </button>

                                            </div>


                                            <div class="col-md-12 addedActionList pdng-top15" ng-hide="!(projectSiteList.length > 0)">


                                                <div class="form-group">

                                                    <label class="">Site List</label>

                                                    <ul class="listOfActions list-group">

                                                        <li class="list-group-item justify-content-between" ng-repeat="projSite in projectSiteList" ng-bind-html-unsafe="projSite.text">
                                                            {{projSite.projectName}}  -  {{projSite.siteName}}
                                                            <span class="badge badge-default badge-pill" ng-click="removeProjectSite($index)"><i class="material-icons">remove_circle</i></span>
                                                        </li>

                                                    </ul>

                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>

                             </div>

	                       <div class="col-md-6">

                               <div class="panel panel-default">
                                   <div class="panel-heading">Reporting hierarchy</div>
                                   <div class="panel-body">

                                       <div class="row">



        		                                    <div class="col-md-6">
                                                <div class="form-group " >
                                                    <label class="control-label">Manager</label>
                                                    <div class="dropdown">
                                                        <!--<input ng-focus="loadAllManagers()" type="text" class="form-control" ng-model="selectedManager" name="manager"-->
                                                               <!--uib-typeahead="employee as employee.name for employee in allManagers | filter:$viewValue | limitTo:10"-->
                                                               <!--ng-minlength=1 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s]*$/"  autocomplete="off" />-->

                                                        <select class=" form-control " ng-model="selectedManager"  ng-options="manager as manager.name for manager in allManagers" >
                                                            <option value="">Please select Manager...</option>
                                                        </select>
                                                        <div ng-show="form.$submitted || form.manager.$touched">
                                                            <div ng-show="form.manager.$dirty || form.manager.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.required">
                                                                    Manager is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.maxlength">
                                                                    Manager cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.pattern">
                                                                    Manager can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

        		                                </div>

        		               </div>
                       </div>


						<!--<div class="form-group"  >-->
							<!--<label class="col-sm-3 control-label"> Photo Code </label>-->
							<!--<div class="col-sm-4">-->
								<!--<input id='code' ng-model="employee.code" class='form-control'-->
									<!--name='code' type='text' value="" ng-minlength=4 ng-maxlength=10 ng-pattern="/^[0-9]*$/"  required/>-->
								<!--<div ng-show="form.$submitted || form.code.$touched">-->
			                    	<!--<div ng-show="form.code.$dirty || form.code.$invalid">-->
			                        <!--<p class="help-block" style="color:maroon"-->
			                               <!--ng-show="form.code.$error.required">-->
			                           <!--Photo Code is required.-->
			                        <!--</p>-->
			                        <!--<p class="help-block" style="color:maroon"-->
			                               <!--ng-show="form.code.$error.minlength">-->
			                            <!--Photo Code is required to be at least 4 character.-->
			                        <!--</p>-->
			                        <!--<p class="help-block" style="color:maroon"-->
			                               <!--ng-show="form.code.$error.maxlength">-->
			                            <!--Photo Code cannot be longer than 10 characters.-->
			                        <!--</p>-->
			                        <!--<p class="help-block" style="color:maroon"-->
			                               <!--ng-show="form.code.$error.pattern">-->
			                            <!--Photo Code can only contain digits.-->
			                    	<!--</p>-->
			                    	<!--</div>-->
		                    	<!--</div>-->
							<!--</div>-->
						<!--</div>-->

						<!-- Start of hidden inputs -->
						<!-- End of hidden inputs -->
						<!-- <div id="activateEmployeeModal" data-backdrop="false" class="modal fade" tabindex="-1" role="dialog"
							aria-labelledby="myModalLabel" aria-hidden="true" >
							<div class="confirm-dialog">
							<div class="modal-content">
							<div class="modal-body">
									Employee with the same ID {{existingEmployee.empId}} exists. Do you want to activate?
							</div>
							<div class="confirm-footer">
									<button type="button" ng-click="saveEmployee()" class="btn btn-danger-outline text-danger" data-dismiss="modal">Confirm</button>
									<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>

							</div>
							</div>
						</div>
						</div> -->

                           </div>
						</div>
                           <div class="row">

                               <div class="col-sm-offset-8 col-sm-4 txt-align-rgt">
                                   <button class="btn btn-success" type="submit"
                                           id="form-button-save" ng-disabled="form.$invalid" >
                                                    <span class="btn-label">
                                            				<i class="material-icons">check</i>
                                        				</span> Save
                                   </button>
                                   <!--<button class="btn btn-info" type="submit"-->
                                   <!--id="save-and-go-back-button" ng-disabled="form.$invalid">-->
                                   <!--<i class="material-icons">rotate_left</i> Save and go back to list-->
                                   <!--</button>-->
                                   <button class="btn btn-danger" type="button"
                                           ng-click="cancelEmployee()" id="cancel-button">
                                       <i class="material-icons">close</i> Cancel
                                   </button>
                               </div>

                           </div>

						<div id="deleteModal" data-backdrop="false" class="modal fade" tabindex="-1" role="dialog"
										aria-labelledby="myModalLabel" aria-hidden="true" >
										<div class="delete-dialog">
									<div class="modal-content">
										<div class="modal-body">
												Employee with the same ID {{existingEmployee.empId}} exists. Do you want to activate?
										</div>
										<div class="delete-footer">
												<button type="button" ng-click="confirmSave()" class="btn btn-danger-outline text-danger" data-dismiss="modal">Confirm</button>
										<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>

										</div>
									</div>
								</div>
									</div>
						<div class='small-loading hidden' id='FormLoading'>Loading,
							saving data...</div>

						<div class="form-group">
							<div id='report-error' class='report-div error bg-danger'
								style="display: none"></div>
							<div id='report-success' class='report-div success bg-success'
								style="display: none"></div>
						</div>


					</form>
				</div>
			</div>
		</div>
	</div>

</div>



