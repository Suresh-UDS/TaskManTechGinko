
<div class="alert alert-success" ng-show="success">
	<strong>Employee saved!</strong>
</div>

<div class="alert alert-danger" ng-show="error">
	<strong>Employee Not Saved!</strong> Please try again later.
</div>
<div class="alert alert-danger" ng-show="errorEmployeeExists">
    <!-- <strong>One of Employee Name or Full Name already registered!</strong> Please choose another one. -->
    <strong>{{errorMessage}}!</strong> Please choose another one.
</div>

<div class="alert alert-danger" ng-show="errorProject">
    <strong>Invalid Project</strong> Please choose another one.
</div>
<div class="alert alert-danger" ng-show="errorSite">
    <strong>Invalid Site</strong> Please choose another one.
</div>
<div class="crud-form"
	data-unique-hash="a2ad475d60b22954085c657a73309b8f">
	<div class="">
		<div class="row">
			<div class="col-md-12">

                <!--<div class="titleCon">-->
                    <!--<h3>Edit Employee</h3>-->
                <!--</div>-->





				<div class="form-container table-container" ng-init="loadEmployee()">
					<form ng-show="!success" name="form" role="form" novalidate
						ng-submit="updateEmployee()" show-validation class="form-horizontal">

						<div class="row">

                            <div class="col-md-6">
                                <div class="card formcard minhgt320">
                                    <div class="card-header card-header-text" data-background-color="orange">
                                        <h4 class="card-title">Identity and Name</h4>
                                    </div>
                                    <div class="card-content">

                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label class="control-label">ID</label>
                                                    <input id='employeeID' ng-model="employee.id" class='form-control'
                                                           name='employeeID' type='text' maxlength='50' readonly />
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label class="control-label">Employee ID</label>
                                                    <input id='employeeEmpId' ng-model="employee.empId" class='form-control'
                                                           name='employeeEmpId' type='text' value="" ng-minlength=1 ng-maxlength=10 ng-pattern="/^[A-Za-z0-9]*$/" autofocus required ng-blur="getEmployeeByEmpId()"/>
                                                    <div ng-show="form.$submitted || form.employeeEmpId.$touched">
                                                        <div ng-show="form.employeeEmpId.$dirty || form.employeeEmpId.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.required">
                                                                Id is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.minlength">
                                                                Id is required to be at least 1 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.maxlength">
                                                                Id cannot be longer than 10 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeEmpId.$error.pattern">
                                                                Id can only contain letters and digits.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label class="control-label">First Name</label>
                                                    <input id='employeeName' ng-model="employee.name" class='form-control'
                                                           name='employeeName' type='text' value=""
                                                           ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/" required />
                                                    <div ng-show="form.$submitted || form.employeeName.$touched">
                                                        <div ng-show="form.employeeName.$dirty || form.employeeName.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.required">
                                                                Employee name is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.minlength">
                                                                Employee name is required to be at least 5 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.maxlength">
                                                                Employee name cannot be longer than 50 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeName.$error.pattern">
                                                                Employee name can only contain letters,numbers and space.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label class="control-label">Last Name</label>
                                                    <input id='employeeLastName' ng-model="employee.lastName" class='form-control'
                                                           name='employeeLastName' type='text' value=""
                                                           ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/" required />
                                                    <div ng-show="form.$submitted || form.employeeLastName.$touched">
                                                        <div ng-show="form.employeeLastName.$dirty || form.employeeLastName.$invalid">
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.required">
                                                                Employee name is required.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.minlength">
                                                                Employee last name is required to be at least 5 character.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.maxlength">
                                                                Employee last name cannot be longer than 50 characters.
                                                            </p>
                                                            <p class="help-block" style="color:maroon"
                                                               ng-show="form.employeeLastName.$error.pattern">
                                                                Employee last name can only contain letters,numbers and space.
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row" ng-init="loadProjects()">




                                        </div>
                                        <div class="row" >



                                        </div>


                                    </div>
                                </div>
                            </div>

                       		<div class="col-md-6">
	                                <div class="card formcard minhgt320">
	                                    <div class="card-header card-header-text" data-background-color="orange">
	                                        <h4 class="card-title">Reporting hierarchy</h4>
	                                    </div>
	                                    <div class="card-content">

	                                        <div class="row">

	                                            <div class="col-md-6">
	                                                <div class="form-group selectcon">
	                                                    <label class="control-label">Designation</label>
	                                                    <select class="siteList" ng-model="employee.designation">
	                                                        <option ng-repeat="designation in employeeDesignations">{{designation}}</option>
	                                                    </select>
	    	                                            </div>
        		                                    </div>
        		                                </div>
        		                                <div class="row">
        		                                    <div class="col-md-6">
                                                <div class="form-group ">
                                                    <label class="control-label">Manager</label>
                                                    <div class="dropdown">
                                                        <input ng-focus="loadAllManagers()" type="text" class="form-control" ng-model="selectedManager" name="manager" ng-value="employee.manager.name"
                                                               uib-typeahead="employee as employee.name for employee in allManagers | filter:$viewValue | limitTo:10"
                                                               ng-minlength=1 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s]*$/"  autocomplete="off" />
                                                        <div ng-show="form.$submitted || form.manager.$touched">
                                                            <div ng-show="form.manager.$dirty || form.manager.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.required">
                                                                    Manager is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.maxlength">
                                                                    Manager cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.manager.$error.pattern">
                                                                    Manager can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
        		                                </div>

        		                            </div>
        		                         </div>
        		               </div>

                       </div>

                       <div class="row" >

                       	  <div class="col-md-6">
                                <div class="card formcard minhgt320">
                                    <div class="card-header card-header-text" data-background-color="orange">
                                        <h4 class="card-title">Client Info</h4>
                                    </div>
                                    <div class="card-content">

                                        <div class="row">

                                            <div class="col-md-4">
                                                <div class="form-group label-floating">
                                                    <label class="control-label">Client</label>
                                                    <div class="dropdown">
                                                        <input type="text" class="form-control" ng-model="selectedProject" name="projectName"
                                                               uib-typeahead="project as project.name for project in projects | filter:$viewValue | limitTo:5"
                                                               ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/"  autocomplete="off" />
                                                        <div ng-show="form.$submitted || form.projectName.$touched">
                                                            <div ng-show="form.projectName.$dirty || form.projectName.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.required">
                                                                    Client name is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.minlength">
                                                                    Client name is required to be at least 2 character.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.maxlength">
                                                                    Client name cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.projectName.$error.pattern">
                                                                    Client name can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group label-floating">
                                                    <label class="control-label">Site</label>
                                                    <div class="dropdown">
                                                        <input ng-focus="loadSites()" type="text" class="form-control"  ng-model="selectedSite" name="siteName"
                                                               uib-typeahead="site as site.name for site in sites | filter:$viewValue | limitTo:5"
                                                               ng-minlength=2 ng-maxlength=50 ng-pattern="/^[A-Za-z0-9\s&-/]*$/"  autocomplete="off" />
                                                        <div ng-show="form.$submitted || form.siteName.$touched">
                                                            <div ng-show="form.siteName.$dirty || form.siteName.$invalid">
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.required">
                                                                    Site name is required.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.minlength">
                                                                    Site name is required to be at least 2 character.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.maxlength">
                                                                    Site name cannot be longer than 50 characters.
                                                                </p>
                                                                <p class="help-block" style="color:maroon"
                                                                   ng-show="form.siteName.$error.pattern">
                                                                    Site name can only contain letters, digits and space.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

											<div class="col-md-4">

					                            <button class="btn btn-success" type="button" ng-click="addProjectSite()">
					                                <span class="btn-label">
					                                    <i class="material-icons">add</i>
					                                </span>
					                                Add
					                            </button>

					                        </div>


                                            <div class="col-md-12 addedActionList pdng-top15" ng-hide="!(projectSiteList.length > 0)">


						                        <div class="form-group">

						                            <label class="">Site List</label>

						                            <ul class="listOfActions list-group">

						                                <li class="list-group-item justify-content-between" ng-repeat="projSite in projectSiteList" ng-bind-html-unsafe="projSite.text">
						                                    {{projSite.projectName}}  -  {{projSite.siteName}}
						                                    <span class="badge badge-default badge-pill" ng-click="removeProjectSite($index)"><i class="material-icons">remove_circle</i></span>
						                                </li>

						                            </ul>

						                        </div>
                                            </div>

                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" name="terms">
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                       </div>

                                    </div>
                                </div>
                             </div>






                       </div>

                        <div class="row">

                                            <div class="col-sm-offset-3 col-sm-7">

                                                <div class="form-group">
                                                    <button class="btn btn-success" type="submit"
                                                            id="form-button-save" ng-disabled="form.$invalid">
                                                        <span class="btn-label">
                                            <i class="material-icons">check</i>
                                        </span> Save
                                                    </button>
                                                    <!--<button class="btn btn-info" type="submit"-->
                                                            <!--id="save-and-go-back-button" ng-disabled="form.$invalid">-->
                                                        <!--<i class="material-icons">rotate_left</i> Save and go back to list-->
                                                    <!--</button>-->
                                                    <button class="btn btn-danger" type="button"
                                                            ng-click="cancelEmployee()" id="cancel-button">
                                                        <i class="material-icons">close</i> Cancel
                                                    </button>
                                                </div>

                                            </div>

                        </div>


						<!-- <div class="form-group"  >
							<label class="col-sm-3 control-label"> Code </label>
							<div class="col-sm-4">
								<input id='code' ng-model="employee.code" class='form-control'
									name='code' type='text' value="" ng-minlength=4 ng-maxlength=4 ng-pattern="/^[0-9]*$/"  required/>
									<div ng-show="form.$submitted || form.code.$touched">
				                    	<div ng-show="form.code.$dirty || form.code.$invalid">
				                        <p class="help-block" style="color:maroon"
				                               ng-show="form.code.$error.required">
				                           Code is required.
				                        </p>
				                        <p class="help-block" style="color:maroon"
				                               ng-show="form.code.$error.minlength">
				                            Code is required to be at least 4 character.
				                        </p>
				                        <p class="help-block" style="color:maroon"
				                               ng-show="form.code.$error.maxlength">
				                            Code cannot be longer than 4 characters.
				                        </p>
				                        <p class="help-block" style="color:maroon"
				                               ng-show="form.code.$error.pattern">
				                            Code can only contain digits.
				                    	</p>
				                    	</div>
		                    		</div>
							</div>
						</div> -->
						<div class="form-group " ng-if="employee.userId > 0">
							<label class="col-sm-3 control-label">User Account Linked</label>
							<div class="col-sm-9">
								<a href="#/view-user/{{employee.userId}}">View User Account</a>
							</div>
						</div>

						<!-- Start of hidden inputs -->
						<!-- End of hidden inputs -->

						<div class='small-loading hidden' id='FormLoading'>Loading,
							saving data...</div>

						<div class="form-group">
							<div id='report-error' class='report-div error bg-danger'
								style="display: none"></div>
							<div id='report-success' class='report-div success bg-success'
								style="display: none"></div>
						</div>

					</form>
				</div>
			</div>
		</div>

	</div>

</div>

