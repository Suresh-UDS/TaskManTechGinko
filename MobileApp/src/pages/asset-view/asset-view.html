<!--
  Generated template for the AssetView page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{assetDetails.title}}</ion-title>
  </ion-navbar>
    <ion-toolbar class="tool-bar">
        <ion-segment [(ngModel)]="categories" class="segmnt margin-auto" color="#ff9800">
            <ion-segment-button value="details" >Details</ion-segment-button>
            <ion-segment-button value="ppm">PPM </ion-segment-button>
            <ion-segment-button value="amc">AMC </ion-segment-button>
            <ion-segment-button value="config">Config </ion-segment-button>
            <ion-segment-button value="readings">Readings</ion-segment-button>
            <ion-segment-button value="jobs">Jobs</ion-segment-button>
            <ion-segment-button value="tickets">Tickets</ion-segment-button>
        </ion-segment>
    </ion-toolbar>
</ion-header>

<ion-content padding>

    <ion-fab right bottom mini (click)="getReadings()"   >
        <ion-label color="light" class="margin0 bg-orange">Reading</ion-label>
        <button ion-fab color="primary" class="margin-auto margin-top5">
            <i class="material-icons">network_check</i>
            <!--<i class="fa fa-tachometer-alt"></i>-->
        </button>
    </ion-fab>

<div [ngSwitch]="categories">
    <ion-list *ngSwitchCase="'details'">
      <div class="card">
         <div class="panel-heading card-header-md-clr-orange">Asset Details</div>

          <div class="card-content table-responsive padding-top0">
              <ion-row class="margin0 white-bg">
                  <ion-col col-6 class="label-on-left" no-padding>Name</ion-col>
                  <ion-col col-6 no-padding>
                      <p text-right>{{assetDetails.title}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding>Code</ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.code}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Group
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.assetGroup}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Type
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.type}}</p>
                  </ion-col>
              </ion-row>
          </div>
      </div>

      <div class="card">
          <div class="panel-heading card-header-md-clr-orange">Asset Location</div>

          <div class="card-content table-responsive padding-top0">
              <ion-row class="margin0 white-bg">
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Client
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.clientName}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Site
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.siteName}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Block
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.block}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Floor
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.floor}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Zone
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.zone}}</p>
                  </ion-col>
              </ion-row>
          </div>
      </div>

      <div class="card">
          <div class="panel-heading card-header-md-clr-orange">Manufacturer Details</div>
          <div class="card-content table-responsive padding-top0">
              <ion-row class="margin0 white-bg">
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Manufacturer
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.manufacturer}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Model Number
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.model}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Serial
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.serial}}</p>
                  </ion-col>
                  <ion-col col-5 class="label-on-left" no-padding="">
                      Acquired Date
                  </ion-col>
                  <ion-col col-7 no-padding="">
                      <p text-right>{{assetDetails.acquiredDate | date:'MMM d, y, h:mm a' }}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Purchase Price
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.purchasePrice}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Current Price
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.currentPrice}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Estimated Dispose Price
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.estimatedDisposePrice}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="">
                      Service Provider
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.serviceProvider}}</p>
                  </ion-col>
                  <ion-col col-6 class="label-on-left" no-padding="jk">
                      Warranty Type
                  </ion-col>
                  <ion-col col-6 no-padding="">
                      <p text-right>{{assetDetails.warrantyType}}</p>
                  </ion-col>
                  <ion-col col-5 class="label-on-left" no-padding="">
                      Warranty End Date
                  </ion-col>
                  <ion-col col-7 no-padding="">
                      <p text-right>{{assetDetails.warrantyEndDate | date:'MMM d, y, h:mm a' }}</p>
                  </ion-col>
              </ion-row>
          </div>
      </div>
    </ion-list>
    <ion-list *ngSwitchCase="'ppm'">
        <p text-right class="fnt-18" (click)="showCalendar()"><ion-icon ios="ios-calendar" md="md-calendar" class="green fnt-25 padding-right10"></ion-icon></p>
        <!--<div *ngIf="assetDetails.ppms?.length<0">-->
            <!--<ion-card>-->
                <!--<ion-card-content>-->
                    <!--No Data Found-->
                <!--</ion-card-content>-->
            <!--</ion-card>-->
        <!--</div>-->
        <div  class="white-bg" *ngFor="let ppm of assetDetails.ppms" >

            <div class="padding-left16 padding-top5">
                <ion-row class="margin0">

                    <ion-col col-2 class="ver-center">
                        <button ion-button clear color="primary" class="">
                            <!--<ion-icon name="ios-construct-outline" class="fnt-24"></ion-icon>-->
                            <ion-icon ios="ios-calendar" md="md-calendar" class="green fnt-24"></ion-icon>
                        </button>
                    </ion-col>
                    <ion-col col-10="" class="padding-left5">
                        <div class="border-btm padding-bottom5 ln-ght20" text-capitalize>
                            <p text-left class="margin0">{{ppm.title}}</p>
                            <p text-left class="margin0">{{ppm.frequency}}</p>
                            <p text-left class="margin0">{{ppm.status}} </p>
                        </div>
                    </ion-col>
                </ion-row>
            </div>

            <ion-item #item class="item-fnt padding-left0" >
                <!--<div class="padding-left16">-->

                <div text-capitalize >
                    <ion-row class="margin0">
                        <ion-col col-6 class="padding-right5">
                            <div>
                                <p text-left class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{ppm.scheduledDate | date:'MMM d, y, h:mm a' }} </p>
                            </div>
                        </ion-col>
                        <ion-col col-6>
                            <div>
                                <p text-right class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{ppm.scheduledDate | date:'MMM d, y, h:mm a' }} </p>
                            </div>
                        </ion-col>
                      </ion-row>
                </div>
                <!--</div>-->
            </ion-item>


        </div>
    </ion-list>

    <ion-list *ngSwitchCase="'amc'">
        <div *ngIf="assetDetails.amc?.length<0">
            <ion-card>
                <ion-card-content>
                    No Data Found
                </ion-card-content>
            </ion-card>
        </div>

        <div  class="white-bg" *ngFor="let ppm of assetDetails.amcs" >

            <div class="padding-left16 padding-top5">
                <ion-row class="margin0">

                    <ion-col col-2 class="ver-center">
                        <button ion-button clear color="primary" class="">
                            <!--<ion-icon name="ios-construct-outline" class="fnt-24"></ion-icon>-->
                            <ion-icon ios="ios-calendar" md="md-calendar" class="blue fnt-24"></ion-icon>
                        </button>
                    </ion-col>
                    <ion-col col-10="" class="padding-left5">
                        <div class="border-btm padding-bottom5 ln-ght20" text-capitalize>
                            <p text-left class="margin0">{{ppm.title}}</p>
                            <p text-left class="margin0">{{ppm.frequency}}</p>
                            <p text-left class="margin0">{{ppm.status}} </p>
                        </div>
                    </ion-col>
                </ion-row>
            </div>

            <ion-item #item class="item-fnt padding-left0" >
                <!--<div class="padding-left16">-->

                <div text-capitalize >
                    <ion-row class="margin0">
                        <ion-col col-6 class="padding-right5">
                            <div>
                                <p text-left class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{ppm.scheduledDate | date:'MMM d, y, h:mm a' }} </p>
                            </div>
                        </ion-col>
                        <ion-col col-6>
                            <div>
                                <p text-right class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{ppm.scheduledDate | date:'MMM d, y, h:mm a' }} </p>
                            </div>
                        </ion-col>
                    </ion-row>
                </div>
                <!--</div>-->
            </ion-item>


        </div>
    </ion-list>

    <ion-list *ngSwitchCase="'config'">
        <!--<div *ngIf="assetDetails.config?.length<0">-->
            <!--<ion-card>-->
                <!--<ion-card-content>-->
                    <!--No Data Found-->
                <!--</ion-card-content>-->
            <!--</ion-card>-->
        <!--</div>-->
    </ion-list>

    <ion-list *ngSwitchCase="'jobs'">
        <div *ngIf="assetDetails.jobs?.length<0">
            <ion-card>
                <ion-card-content>
                    No Data Found
                </ion-card-content>
            </ion-card>
        </div>

        <ion-refresher (ionRefresh)="doRefresh($event,'jobs')">
            <ion-refresher-content></ion-refresher-content>
        </ion-refresher>


        <div  class="white-bg" *ngFor="let job of assetDetails.jobs" >

            <div class="padding-left16 padding-top5">
                <ion-row class="margin0">

                    <ion-col col-2 class="ver-center">
                        <button ion-button clear color="primary" class="icon-round ion-circle-icons"
                                [ngClass]="{'icon-round-red' : (job.status == 'OVERDUE'),
                                                          'icon-round-green' : (job.status == 'COMPLETED'),
                                                          'icon-round-blue' :(job.status =='OPEN' || job.status == 'ASSIGNED' || job.status == 'INPROGRESS')}">
                            <ion-icon name="ios-construct-outline" class="fnt-24"></ion-icon>
                        </button>
                    </ion-col>
                    <ion-col col-8 class="padding-left5">
                        <div class="border-btm padding-bottom5 ln-ght20" text-capitalize>
                            <p text-left class="margin0">{{job.title}}</p>
                            <p text-left class="margin0">{{job.employeeName}}</p>
                            <p text-left class="margin0">{{job.siteProjectName}} - {{job.siteName}}</p>
                        </div>
                    </ion-col>
                    <ion-col col-2 class="padding-left0 ver-center">
                        <div class="padding-bottom5">
                            <button ion-button clear color="primary" (tap)="open(slidingItem, item ,count)">
                                <i class="material-icons">more_horiz</i>
                            </button>
                        </div>
                    </ion-col>
                    <!--
                    <ion-col col-1>
                        <p (click)="open(ItemSliding,Item)">f</p>
                    </ion-col>
                    -->

                </ion-row>
            </div>
            <ion-item-sliding #slidingItem>

                <ion-item #item class="item-fnt padding-left0" >
                    <!--<div class="padding-left16">-->

                    <div text-capitalize >
                        <ion-row class="margin0">
                            <ion-col col-6 class="padding-right5">
                                <div *ngIf="job.status =='COMPLETED'">
                                    <p text-left class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{job.actualStartTime | date:'MMM d, y, h:mm a' }} </p>
                                </div>
                                <div *ngIf="job.status !='COMPLETED'">
                                    <p text-left class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{job.plannedStartTime | date:'MMM d, y, h:mm a' }} </p>
                                </div>
                            </ion-col>
                            <ion-col col-6>
                                <div *ngIf="job.status =='COMPLETED'">
                                    <p text-right class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{job.actualEndTime | date:'MMM d, y, h:mm a' }} </p>
                                </div>
                                <div *ngIf="job.status !='COMPLETED'">
                                    <p text-right class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{job.plannedEndTime | date:'MMM d, y, h:mm a' }} </p>
                                </div>
                            </ion-col>
                        </ion-row>
                    </div>
                    <!--</div>-->
                </ion-item>

                <ion-item-options class="ActionBtns" (click)="close(slidingItem)">
                    <div>
                        <button ion-button clear color="primary"><ion-icon name="md-eye" (click)="viewJob(job)" class="fnt-24 act-btn-view"></ion-icon></button>
                    </div>
                    <!--<div *ngIf="userType === 'ADMIN' || userType === 'TECHNICIAN' || userType === 'FACILITYMANAGER' || userType === 'SUPERVISOR'">-->
                    <!--<button ion-button clear color="clr-blue"><ion-icon name="md-create" class="fnt-24"></ion-icon></button>-->
                    <!--</div>-->
                    <div >
                        <button ion-button clear color="secondary" *ngIf="job.status !='COMPLETED'" (click)="compeleteJob(job)"><ion-icon name="md-checkmark-circle" class="fnt-24 act-btn-view"></ion-icon></button>
                    </div>
                    <div *ngIf="userType === 'ADMIN' || userType === 'TECHNICIAN' || userType === 'FACILITYMANAGER' || userType === 'SUPERVISOR'">
                        <button ion-button clear color="danger"><ion-icon name="md-close-circle" class="fnt-24 act-btn-view"></ion-icon></button>
                    </div>
                </ion-item-options>
            </ion-item-sliding>

        </div>

        <ion-infinite-scroll *ngIf="page<totalPages"  (ionInfinite)="jobScroll($event)">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
        </ion-infinite-scroll>

    </ion-list>

    <ion-list *ngSwitchCase="'tickets'">

        <ion-row no-margin class="" no-padding="" >
            <ion-col col-5 class="ver-center  margin-right15" (click)="selectFromDate()">
                <ion-col col-2  class="ver-center padding-bottom1 primary-border-bottom">
                    <ion-icon ios="ios-calendar" md="md-calendar"  class="fnt-24 clr-orange"></ion-icon>
                </ion-col>
                <ion-col col-10 class="ver-center padding-top-bottom0 primary-border-bottom">
                    <ion-label *ngIf="!fromDate" class="bg-grey" no-margin="">From date</ion-label>
                    <p padding-left no-margin="">{{ fromDate | date:'dd/MM/yyyy' }}</p>
                </ion-col>
            </ion-col>
            <ion-col col-5 (click)="selectToDate()" class="ver-center">
                <ion-col col-2 class="ver-center padding-bottom1 primary-border-bottom">
                    <ion-icon ios="ios-calendar" md="md-calendar" class="fnt-24 clr-orange"></ion-icon>
                </ion-col>
                <ion-col col-10 class="ver-center padding-top-bottom0 primary-border-bottom">
                    <ion-label *ngIf="!toDate" class="bg-grey" no-margin="">To date</ion-label>
                    <p padding-left no-margin="">{{ toDate | date:'dd/MM/yyyy' }}</p>
                </ion-col>
            </ion-col>
            <ion-col col-2 class=" ver-center padding-top-bottom0">
                <button ion-button round class="color-white" (click)="dateSearch(fromDate,toDate)" [disabled]="!viewButton">
                    <ion-icon name="arrow-round-forward"></ion-icon>
                </button>
            </ion-col>
        </ion-row>

        <!--<ion-list *ngIf="assetDetails.tickets.length<=0">-->
            <!--<ion-item>-->
                <!--<ion-card padding>-->
                    <!--<ion-card-header no-padding>-->
                        <!--No Tickets found-->
                    <!--</ion-card-header>-->
                <!--</ion-card>-->
            <!--</ion-item>-->

        <!--</ion-list>-->

        <ion-refresher (ionRefresh)="doRefresh($event,'tickets')">
            <ion-refresher-content>

            </ion-refresher-content>
        </ion-refresher>

        <div  class="white-bg" *ngFor="let ticket of assetDetails.tickets" (click)="viewTicket(ticket)">
            <div class="padding-left16 padding-top5">
                <ion-row class="margin0">
                    <ion-col col-2 class="ver-center">
                        <ion-icon *ngIf="ticket.status=='Open'" style="color:red" ios="ios-alert" md="md-alert" class="fnt-24"></ion-icon>
                        <ion-icon *ngIf="ticket.status=='Closed'" style="color:green" ios="ios-checkmark-circle" md="md-checkmark-circle" class="fnt-24"></ion-icon>
                        <ion-icon *ngIf="ticket.status=='OnGoing' || ticket.status =='Assigned'" style="color: orangered" ios="ios-help-circle" md="md-help-circle" class="fnt-24"></ion-icon>
                    </ion-col>
                    <ion-col col-8 class="padding-left5">
                        <div class="border-btm padding-bottom5 ln-ght20" text-capitalize>
                            <p text-left class="margin0"><span>{{ticket.title}}</span><span float-right>{{ticket.status}}</span></p>
                        </div>
                    </ion-col>
                </ion-row>
            </div>

            <ion-item #item class="item-fnt padding-left0" >
                <!--<div class="padding-left16">-->
                <div text-capitalize >
                    <ion-row class="margin0">
                        <ion-col col-6 class="padding-right5">
                            <div>
                                <p text-left class="fnt-12"><ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{ticket.createdDate | date:'MMM d, y, h:mm a' }} </p>
                            </div>
                        </ion-col>
                        <ion-col col-6 class="padding-right5">
                            <div >
                                <p text-right class="fnt-12"><ion-icon ios="ios-contact" md="md-contact" class="green padding-right10"></ion-icon>{{ticket.createdBy}} </p>
                            </div>
                        </ion-col>
                    </ion-row>
                </div>
                <!--</div>-->
            </ion-item>

        </div>

    </ion-list>

    <ion-list *ngSwitchCase="'readings'">
        <div *ngIf="assetDetails.readings?.length<0">
            <ion-card>
                <ion-card-content>
                    No Reading
                </ion-card-content>
            </ion-card>
        </div>
        <table class="table table-hover">
            <thead class="text-warning">
                <th >Date</th>
                <th >Consumption</th>
                <th >Type</th>
            </thead>
            <tbody>
                <tr>
                    <td class="padding-left0">10-05-2018</td>
                    <td class="padding-left0">20 Watt</td>
                    <td class="padding-left0">POWER</td>

                </tr>
                <tr>
                    <td class="padding-left0">11-05-2018</td>
                    <td class="padding-left0">0 Watt</td>
                    <td>POWER</td>
                </tr>
                <tr>
                    <td class="padding-left0">12-05-2018</td>
                    <td class="padding-left0">60 Watt</td>
                    <td class="padding-left0">POWER</td>
                </tr>
            </tbody>
        </table>
    </ion-list>
</div>
</ion-content>
