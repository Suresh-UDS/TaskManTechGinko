<!--
  Generated template for the Indent page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<!--
  Generated template for the AddInventoryTransaction page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
      <button ion-button menuToggle>
          <ion-icon name="menu"></ion-icon>
      </button>
    <ion-title>Indent</ion-title>
  </ion-navbar>

</ion-header>


<ion-content class="CreateTicketPage FormPage">
    <!--<ion-row no-margin>-->
        <!--<ion-col col-12>-->
            <!--<ion-item>-->
                <!--<ion-label   text-capitalize class="client-label" text-left >Reference number:</ion-label>-->
                <!--<ion-input type="text" [(ngModel)]="referenceNumber"></ion-input>-->
            <!--</ion-item>-->
        <!--</ion-col>-->
    <!--</ion-row>-->
  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-content">
          <ion-row>

            <ion-col col-12>
              <div class="form-group label-floating indent-padding " [ngClass]="{'has-error':eMsg=='all'||eMsg=='purposeDetails'}">
                <label class="control-label">Purpose</label>
                <input class="form-control" type="text" [(ngModel)]="purposeDetails" #titl="ngModel" required [ngClass]="{'has-error': titl.errors || eMsg=='all' || eMsg=='title'}">
                <div *ngIf="titl.errors && (titl.dirty || titl.touched)" class="error-msg">
                </div>
                <div *ngIf="titl.errors && (titl.untouched )" class="error-msg">
                </div>
                </div>
            </ion-col>

            <ion-col col-12>
              <p text-center>Choose Client</p>
              <div class="SitesScrollCon">
                <ion-scroll scrollX="true">
                  <button class="scroll-item" ion-button round *ngFor="let p of clientList; let i of index" (click)="selectSite(p,i)" [color]="projectActive && i==projectindex ? 'primary':'light'">
                    <p class="siteName">{{p.name}}</p>
                  </button>
                </ion-scroll>
              </div>
            </ion-col>

            <ion-col col-12>

              <p text-center>Choose Site</p>

              <div padding text-center *ngIf="siteSpinner">
                <span><ion-spinner name="bubbles"></ion-spinner> <br> Loading...</span>
              </div>

              <div padding text-center *ngIf="chooseClient">
                <strong>Please Select Client</strong>
              </div>

              <div class="SitesScrollCon" *ngIf="showSites">
                <ion-scroll scrollX="true">
                  <button class="scroll-item" ion-button round  *ngFor="let site of siteList;let i of index" (click)="searchMaterials(site,i)" [color]="siteActive && i==index ? 'primary' : 'light'">
                    <p class="siteName">{{site.name}}</p>
                  </button>
                </ion-scroll>
              </div>

            </ion-col>





    <!--<ion-row no-margin>
        <ion-col col-12>
            <ion-item>
                <ion-label   text-capitalize class="client-label" text-left >Purpose:</ion-label>
                <ion-input type="text" [(ngModel)]="purposeDetails"></ion-input>
            </ion-item>
        </ion-col>
    </ion-row>
  <ion-row no-margin>
    <ion-col col-12>
      <ion-item>
        <ion-label text-capitalize class="client-label" text-left>Client :</ion-label>
        <ion-select [selectOptions]="selectOptions" interface="popover" [(ngModel)]="selectedProject" >
          <ion-option *ngFor="let p of clientList;let i=index" [value]="p" (ionSelect)="selectSite(p)" text-center>{{p.name}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-col>
  </ion-row>
  <ion-row no-margin>
    <ion-col col-12>
      <ion-item>
        <ion-label text-capitalize class="client-label" text-left>Site:</ion-label>
        <ion-select [selectOptions]="selectOptions" interface="popover" [(ngModel)]="selectedSite">
          <ion-option  *ngFor="let s of siteList;let i of index"  [value]="s" (ionSelect)="searchMaterials(s)" text-center>{{s.name}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-col>
  </ion-row>-->
    <!--<ion-row no-margin>-->
        <!--<ion-col>-->
            <!--<ion-input type="text" [(ngModel)]="searchText" (ionChange)='f(searchText)' class="txt-input" placeholder="Search Employees">-->

            <!--</ion-input>-->
        <!--</ion-col>-->
    <!--</ion-row>-->

    <!--<ion-row *ngIf="searchText"  no-margin>-->
        <!--<div>-->
            <!--<ul class="fnt-z white-bg width90">-->
                <!--<li>Seeni</li>-->
                <!--<li>Venkatesh</li>-->
                <!--<li>Sowmiya</li>-->
                <!--<li>Karthick</li>-->
            <!--</ul>-->
        <!--</div>-->
    <!--</ion-row>-->

  <!--<ion-row no-margin>-->
    <!--<ion-col col-12>-->
      <!--<ion-item>-->
        <!--<ion-label text-capitalize class="client-label" text-left>Group:</ion-label>-->
        <!--<ion-select  interface="popover"   text-lowercase>-->
          <!--<ion-option text-center text-lowercase *ngFor="let g of inventoryGroups;let i of index" (ionSelect)="getMaterialByGroup(g)" >{{g.itemGroup}}</ion-option>-->
        <!--</ion-select>-->
      <!--</ion-item>-->
    <!--</ion-col>-->
  <!--</ion-row>-->

      <!--<ion-item>-->
          <!--<ion-label text-capitalize class="client-label" text-left>Material:</ion-label>-->
          <!--<ion-select interface="popover" >-->
              <!--<ion-option text-center *ngFor="let m of inventoryMaterial;let i of index" (ionSelect)="selectMaterial(m)" >{{m.name}}</ion-option>-->
        <!--</ion-select>-->
      <!--</ion-item>-->
            <ion-col col-12>
                  <ion-row no-margin text-center>
                        <ion-col col-9>
                          <ion-item>
                              <ion-label text-capitalize class="client-label" text-left>Material:</ion-label>
                              <select-searchable
                                      item-content
                                      [(ngModel)]="indentMaterial"
                                      [items]="inventoryMaterial"
                                      (ionSelect)="selectMaterial(m)"
                                      itemValueField="id"
                                      itemTextField="name"
                                      [canSearch]="true"
                                      (onChange)="portChange($event)">
                              </select-searchable>
                          </ion-item>
                        </ion-col>

                          <ion-col col-3 float-right>
                              <button class="btn btn-warning pull-right"  (click)="addIndent(indentMaterial)">Add</button>
                        </ion-col>

                  </ion-row>
            </ion-col>

            <ion-col col-12>
              <ion-row no-margin *ngIf="selectedMaterial">
                  <ion-col col-12>
                      <ion-item text-center class="bg-gray">
                          <ion-label class="clr-orange bg-gray">Added Materials</ion-label>
                      </ion-item>
                  </ion-col>
              </ion-row>
            </ion-col>

            <ion-col col-12>
              <ion-row no-margin class="white-bg" *ngFor="let t of indent">
                <ion-col col-6>
                  <ion-list>
                    <ion-item style="padding-left:0px">
                        <ion-input type="text" value=""  placeholder="name" [(ngModel)]="t.materialName" disabled></ion-input>
                    </ion-item>
                  </ion-list>
                </ion-col>
                <ion-col col-2>
                  <ion-list>
                    <ion-item style="padding-left:0px">
                        <ion-input type="number" value=""  placeholder="Qty" [(ngModel)]="t.quantity" ></ion-input>
                    </ion-item>
                  </ion-list>
                </ion-col>
                <ion-col col-2>
                  <ion-list>
                    <ion-item style="padding-left:0px">
                      <ion-input type="text" value=""  placeholder="uom" [(ngModel)]="t.materialUom" disabled></ion-input>
                    </ion-item>
                  </ion-list>
                </ion-col>
                <ion-col col-2>
                  <button ion-fab mini color="dark" (click)="removeTransaction(i)">
                    <ion-icon name="md-close" class="clr-orange"></ion-icon>
                  </button>
                </ion-col>
              </ion-row>
            </ion-col>

          </ion-row>
        </div>
      </div>
    </div>
  </div>

</ion-content>

<ion-footer>
    <ion-toolbar text-center>
        <button class="btn btn-warning center width42" (click)="saveIndentMaterial()">
            Save
        </button>
    </ion-toolbar>
</ion-footer>


