<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{siteDetail.name}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-segment [(ngModel)]="categories" color="clr-blue">
    <ion-segment-button value="detail">
      Detail
    </ion-segment-button>
    <ion-segment-button value="jobs" (click)="getJobs()">
      Jobs
    </ion-segment-button>
    <ion-segment-button value="quotation">
      Quotation
    </ion-segment-button>
    <ion-segment-button value="attendance">
      Attendance
    </ion-segment-button>

  </ion-segment>


  <div [ngSwitch]="categories">

    <ion-col col-11 class="margin-auto" *ngSwitchCase="'detail'" >
      <div class="card">
        <div class="card-content">
          <div class="row">
            <label class="col-md-4 label-on-left">Site Name</label>
            <div class="col-md-8">
              <p text-right>{{siteDetail.name}}</p>
            </div>
          </div>
          <div class="row">
            <label class="col-md-4 label-on-left">Client Name</label>
            <div class="col-md-8">
              <p text-right>{{siteDetail.projectName}}</p>
            </div>
          </div>
          <div class="row">
            <label class="col-md-4 label-on-left">Address</label>
            <div class="col-md-8">
              <p text-right>{{siteDetail.address}}</p>
            </div>
          </div>
          <div class="row">
            <label class="col-md-4 label-on-left">Address Co-ordinates</label>
            <div class="col-md-8">
              <p text-right>{{siteDetail.addressLat}},{{siteDetail.addressLng}}</p>
            </div>
          </div>
        </div>
      </div>
    </ion-col>

    <ion-list *ngSwitchCase="'jobs'">
      <div class="card" *ngFor="let job of jobs" [ngClass]="{'red-card' : (job.status == 'OVERDUE'),
                                                          'green-card' : (job.status == 'COMPLETED'),
                                                          'blue-card' :(job.status =='OPEN' || job.status == 'ASSIGNED' || job.status == 'INPROGRESS')}">

        <div class="card-content padding-bottom0" >
          <ion-row class="margin0">
            <ion-col col-12 class="padding-right0">
              <button ion-button icon-left icon-only clear class="pop-icon" (click)="viewJob(job)">
                <ion-icon name="eye" class="fnt-12 padding0"></ion-icon>
              </button>
            </ion-col>
          </ion-row>
          <ion-row class="margin0">
            <ion-col col-8 class="padding-left0"><p text-left>{{job.title}}</p></ion-col>
            <ion-col col-4 class="padding-right0">
              <p text-right [ngClass]="{'red' : (job.status == 'OVERDUE'),
                                                          'green' : (job.status == 'COMPLETED'),
                                                          'blue' :(job.status =='OPEN' || job.status == 'ASSIGNED' || job.status == 'INPROGRESS')}" >
                {{job.status}}
              </p>
            </ion-col>
          </ion-row>
          <p>{{job.employeeName}}</p>
          <p>{{job.siteProjectName}} - {{job.siteName}}</p>
        </div>

        <div class="card-footer">
          <div *ngIf="job.status !='COMPLETED'">
            <p>{{job.plannedStartTime | date:'dd/MM/yyyy @ H:mm' }} - {{job.plannedEndTime | date:'dd/MM/yyyy @ H:mm' }} </p>
          </div>
          <div *ngIf="job.status =='COMPLETED'">
            <p>{{job.actualStartTime | date:'dd/MM/yyyy @ H:mm' }} - {{job.actualEndTime | date:'dd/MM/yyyy @ H:mm' }} </p>
          </div>
          <div class="stats align-right">
            <!--<p class="display-inline">view</p><ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>-->
          </div>
        </div>
      </div>
    </ion-list>
    <ion-list *ngSwitchCase="'quotation'">
      <ion-item>

      </ion-item>
    </ion-list>
    <ion-list *ngSwitchCase="'attendance'">
      <ion-item>

      </ion-item>
    </ion-list>

  </div>

</ion-content>
