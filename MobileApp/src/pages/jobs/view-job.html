<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Job Details</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="ViewJobsCon cardListCon"  [ngClass]="{'jobOverdueCon' : (jobDetails.status == 'OVERDUE'),
                                    'jobCompletedCon' : (jobDetails.status == 'COMPLETED'),
                                    'jobNormalCon' :(jobDetails.status =='OPEN' || jobDetails.status == 'ASSIGNED' || jobDetails.status == 'INPROGRESS')}">

    <ion-row class="margin0">
        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Job ID
                </ion-card-header>
                <ion-card-content>
                    {{jobDetails.id}}
                </ion-card-content>
            </ion-card>
        </ion-col>
        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Status
                </ion-card-header>
                <ion-card-content>

                    <span>
                        {{jobDetails.status}}
                    </span>
                </ion-card-content>
            </ion-card>
        </ion-col>
    </ion-row>


    <ion-card class="new-card-md">
        <ion-card-header>
            Job Name
        </ion-card-header>
        <ion-card-content>
            {{jobDetails.title}}
        </ion-card-content>
    </ion-card>



    <ion-card class="new-card-md">
        <ion-card-header>
            Description
        </ion-card-header>
        <ion-card-content>
            {{jobDetails.description}}
        </ion-card-content>
    </ion-card>

    <ion-card class="new-card-md">
        <ion-card-header>
            Employee Name
        </ion-card-header>
        <ion-card-content>
            {{jobDetails.employeeName}}
        </ion-card-content>
    </ion-card>

    <ion-card class="new-card-md">
        <ion-card-header>
            Site Name
        </ion-card-header>
        <ion-card-content>
            {{jobDetails.siteName}}
        </ion-card-content>
    </ion-card>

    <ion-row class="margin0">

        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Planned Start Time
                </ion-card-header>
                <ion-card-content>
                    <ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{jobDetails.plannedStartTime | date:'MMM d, y, h:mm a'}}
                </ion-card-content>
            </ion-card>
        </ion-col>
        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Planned End Time
                </ion-card-header>
                <ion-card-content>
                    <ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{jobDetails.plannedEndTime | date:'MMM d, y, h:mm a'}}
                </ion-card-content>
            </ion-card>
        </ion-col>

    </ion-row>




    <ion-row class="margin0" *ngIf="jobDetails.status == 'COMPLETED' ">

        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Actual Start Time
                </ion-card-header>
                <ion-card-content>
                    <ion-icon ios="ios-calendar" md="md-calendar" class="green padding-right10"></ion-icon>{{jobDetails.actualStartTime | date:'MMM d, y, h:mm a'}}
                </ion-card-content>
            </ion-card>
        </ion-col>

        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Actual End Time
                </ion-card-header>
                <ion-card-content>
                    <ion-icon ios="ios-calendar" md="md-calendar" class="red padding-right10"></ion-icon>{{jobDetails.actualEndTime | date:'MMM d, y, h:mm a'}}
                </ion-card-content>
            </ion-card>
        </ion-col>

        <ion-col col-3 *ngFor="let image of completedImages">
            <img src="{{image}}" wdith="80px" height="80px" (click)="viewImage(image)">
        </ion-col>
    </ion-row>

    <ion-row has-permission="TicketsView" class="margin0" *ngIf="jobDetails.ticketId>0">

        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Ticket Id
                </ion-card-header>
                <ion-card-content>
                    {{jobDetails.ticketId}}
                </ion-card-content>
            </ion-card>
        </ion-col>
        <ion-col col-6>
            <ion-card class="new-card-md">
                <ion-card-header>
                    Ticket Name
                </ion-card-header>
                <ion-card-content>
                    {{jobDetails.ticketName}}
                </ion-card-content>
            </ion-card>
        </ion-col>

    </ion-row>


</ion-content>

<ion-footer *ngIf="jobDetails.status !='COMPLETED'">
    <ion-toolbar class="align-center" *ngIf="jobDetails.status !='COMPLETED'">
        <button has-permission="TicketsView" *ngIf="jobDetails.ticketId>0" class="btn btn-success center pull-left" (click)="gotoTicket()" >View Ticket</button>
        <button *ngIf="jobDetails.status !='COMPLETED'" class="btn btn-success center pull-right" type="submit" (click)="completeJob(jobDetails)">Complete Job</button>
    </ion-toolbar>
</ion-footer>
