<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{siteDetail.name}}</ion-title>
  </ion-navbar>

  <ion-toolbar transparent>
    <ion-segment [(ngModel)]="categories" color="clr-blue">
        <ion-segment-button value="detail">
            Detail
        </ion-segment-button>
        <ion-segment-button value="jobs" (click)="getJobs(false)">
            Jobs
        </ion-segment-button>
        <ion-segment-button value="quotation">
            Quotation
        </ion-segment-button>
        <ion-segment-button value="attendance" (click)="getAttendance(false)">
            Attendance
        </ion-segment-button>
    </ion-segment>
  </ion-toolbar>


</ion-header>

<ion-content>

  <div [ngSwitch]="categories">
    <ion-list *ngSwitchCase="'detail'">
          <ion-row class="margin0 white-bg padding10">
            <ion-col col-6 class="label-on-left">Site Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.name}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Client Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.projectName}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.address}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address Co-ordinates</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.addressLat}},{{siteDetail.addressLng}}</p>
            </ion-col>
          </ion-row>

          <ion-row class="margin-tp25 white-bg padding10">
            <ion-col col-6 class="label-on-left">Site Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.name}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Client Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.projectName}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.address}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address Co-ordinates</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.addressLat}},{{siteDetail.addressLng}}</p>
            </ion-col>
          </ion-row>

          <ion-row class="margin-tp25 white-bg padding10">
            <ion-col col-6 class="label-on-left">Site Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.name}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Client Name</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.projectName}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.address}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Address Co-ordinates</ion-col>
            <ion-col col-6>
              <p text-right>{{siteDetail.addressLat}},{{siteDetail.addressLng}}</p>
            </ion-col>
          </ion-row>
    </ion-list>
    <ion-list *ngSwitchCase="'jobs'">
      <ion-refresher (ionRefresh)="doRefresh($event,job)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
      <ion-col col-10 class="margin-auto">
        <div class="card" *ngFor="let job of jobs" [ngClass]="{'red-card' : (job.status == 'OVERDUE'),
                                                            'green-card' : (job.status == 'COMPLETED'),
                                                            'blue-card' :(job.status =='OPEN' || job.status == 'ASSIGNED' || job.status == 'INPROGRESS')}">
          <div class="card-content padding-bottom0" >
            <ion-row class="margin0">
              <ion-col col-12 class="padding-right0">
                <button ion-button icon-left icon-only clear class="pop-icon" (click)="viewJob(job)">
                  <ion-icon name="eye" class="fnt-12 padding0"></ion-icon>
                </button>
              </ion-col>
            </ion-row>
            <ion-row class="margin0">
              <ion-col col-7 class="padding-left0"><p text-left>{{job.title}}</p></ion-col>
              <ion-col col-5 class="padding-right0">
                <p text-right [ngClass]="{'red' : (job.status == 'OVERDUE'),
                                                            'green' : (job.status == 'COMPLETED'),
                                                            'blue' :(job.status =='OPEN' || job.status == 'ASSIGNED' || job.status == 'INPROGRESS')}" >
                  {{job.status}}
                </p>
              </ion-col>
            </ion-row>
            <p>{{job.employeeName}}</p>
            <p>{{job.siteProjectName}} - {{job.siteName}}</p>
          </div>

          <div class="card-footer">
            <div *ngIf="job.status !='COMPLETED'">
              <p>{{job.plannedStartTime | date:'dd/MM/yyyy @ H:mm' }} - {{job.plannedEndTime | date:'dd/MM/yyyy @ H:mm' }} </p>
            </div>
            <div *ngIf="job.status =='COMPLETED'">
              <p>{{job.actualStartTime | date:'dd/MM/yyyy @ H:mm' }} - {{job.actualEndTime | date:'dd/MM/yyyy @ H:mm' }} </p>
            </div>
            <div class="stats align-right">
              <!--<p class="display-inline">view</p><ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>-->
            </div>
          </div>
        </div>
      </ion-col>
    </ion-list>
    <ion-list *ngSwitchCase="'quotation'">
      <ion-refresher (ionRefresh)="doRefresh($event,attendance)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
      <div class="row padding0 margin0 white-bg">
        <ion-col col-12 class="padding-top0">
          <div class="table-responsive table-sales">
            <table class="table fnt-18">
              <tbody>
              <tr (click)="quotationView()">
                <td>Approved</td>
                <td class="text-right">
                  <span class="clr-orange padding-right2">(</span>0<span class="clr-orange padding-left2">)</span>
                </td>
                <td class="text-right">
                  <ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>
                </td>
              </tr>
              <tr (click)="quotationView()">
                <td>Overdue</td>
                <td class="text-right">
                  <span class="clr-orange padding-right2">(</span>0<span class="clr-orange padding-left2">)</span>
                </td>
                <td class="text-right">
                  <ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>
                </td>
              </tr>
              <tr (click)="quotationView()">
                <td>Requested</td>
                <td class="text-right">
                  <span class="clr-orange padding-right2">(</span>0<span class="clr-orange padding-left2">)</span>
                </td>
                <td class="text-right">
                  <ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>
                </td>
              </tr>
              <tr (click)="quotationView()">
                <td>Archieved</td>
                <td class="text-right">
                  <span class="clr-orange padding-right2">(</span>0<span class="clr-orange padding-left2">)</span>
                </td>
                <td class="text-right">
                  <ion-icon class="primary-clr padding-left5 fnt-12" name="arrow-forward"></ion-icon>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </ion-col>
      </div>
    </ion-list>
    <ion-list *ngSwitchCase="'attendance'">
      <ion-refresher (ionRefresh)="doRefresh($event,attendance)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>

        <ion-row class="margin0 white-bg padding10 margin-bottom25 width98 margin-side-auto" *ngFor="let a of attendances">
            <ion-col col-12 *ngIf="!attendances">
                <p>No Records</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Name</ion-col>
            <ion-col col-6>
                <p text-left class="margin0">{{a.employeeFullName}}</p>
            </ion-col>
            <ion-col col-6 class="label-on-left">Site</ion-col>
            <ion-col col-6>
                <p text-left class="margin0">{{a.siteName}}</p>
            </ion-col>
            <ion-col col-6>
                <p text-left class="margin0" class="display-inline">{{a.checkInTime |date:'MM/dd/yyyy @ h:mma'}}</p>
            </ion-col>
            <ion-col col-6>
                <p text-right class="margin0" class="display-inline">{{a.checkOutTime |date:'MM/dd/yyyy @ h:mma'}}</p>
            </ion-col>
            <ion-col col-6 class="align-center">
                <ion-item no-lines class="item-label">
                    <ion-avatar *ngIf="a.checkInImage">
                        <img  [src]="a.checkInImage" >
                    </ion-avatar>
                    <ion-avatar *ngIf="!a.checkInImage">
                        <img  src="img/user.png" width="10%">
                    </ion-avatar>
                </ion-item>
            </ion-col>
            <ion-col col-6 class="align-center">
                <ion-item no-lines class="item-label">
                    <ion-avatar *ngIf="a.checkOutImage">
                        <img  [src]="a.checkOutImage" >
                    </ion-avatar>
                    <ion-avatar *ngIf="!a.checkOutImage">
                        <img  src="img/user.png" >
                    </ion-avatar>
                </ion-item>
            </ion-col>
        </ion-row>
    </ion-list>

  </div>

</ion-content>
